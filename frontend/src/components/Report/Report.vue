<template>
  <div class="report-page">
    <div class="breadcrumb">
      <span class="breadcrumb-item">æµ‹è¯„æŠ¥å‘Š</span>
      <span class="breadcrumb-divider">></span>
      <span class="breadcrumb-item active">ç»“æœåˆ†æ</span>
    </div>
    
    <div class="score-container">
      <div class="score-card">
        <div class="score-main">
          <h1 class="total-score">85/100</h1>
          <div class="trophy-container">
            <SvgIcon name="trophy" class="trophy-icon" />
            <span class="grade">è¯„çº§ï¼šAï¼ˆä¼˜ç§€ï¼‰</span>
              </div>
            </div>
        <div class="metrics-container">
          <div class="metric-item">
            <div class="metric-label">å‡»è´¥å…¨å›½å€™é€‰äºº</div>
            <div class="metric-value">89%</div>
          </div>
          <div class="metric-item">
            <div class="metric-label">å²—ä½åŒ¹é…åº¦</div>
            <div class="metric-value">92%</div>
          </div>
              </div>
            </div>
          </div>
          
    <div class="ability-scores">
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon">
            <SvgIcon name="technical-ability" />
          </div>
          <span>æŠ€æœ¯èƒ½åŠ›</span>
        </div>
        <div class="ability-score">88</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '88%' }"></div>
        </div>
      </div>
      
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon">
            <SvgIcon name="expression-logic" />
          </div>
          <span>è¡¨è¾¾é€»è¾‘</span>
        </div>
        <div class="ability-score">82</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '82%' }"></div>
        </div>
      </div>
      
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon">
            <SvgIcon name="adaptability" />
          </div>
          <span>åº”å˜èƒ½åŠ›</span>
        </div>
        <div class="ability-score">76</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '76%' }"></div>
        </div>
      </div>
      
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon">
            <SvgIcon name="behavior-etiquette" />
          </div>
          <span>è¡Œä¸ºç¤¼ä»ª</span>
        </div>
        <div class="ability-score">91</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '91%' }"></div>
        </div>
      </div>
      
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon collaboration-icon">
            <SvgIcon name="collaboration" />
          </div>
          <span>åä½œæ„è¯†</span>
        </div>
        <div class="ability-score">68</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '68%' }"></div>
        </div>
      </div>
      
      <div class="ability-card">
        <div class="ability-header">
          <div class="ability-icon">
            <SvgIcon name="cultural-fit" />
          </div>
          <span>æ–‡åŒ–åŒ¹é…</span>
        </div>
        <div class="ability-score">80</div>
        <div class="score-bar">
          <div class="bar-fill" :style="{ width: '80%' }"></div>
        </div>
      </div>
    </div>
    
    <!-- é«˜å…‰æ—¶åˆ»å’Œä½åˆ†ç‰‡æ®µ -->
    <div class="highlight-lowlight">
      <div class="highlight-section">
        <div class="section-tag good">
          <SvgIcon name="advantages" />
          <span>é«˜å…‰æ—¶åˆ»</span>
        </div>
        <ul class="timestamp-list">
          <li><span class="timestamp">04:32</span> å·§å¦™è½¬åŒ–"æœ€å¤§ç¼ºç‚¹"ä¸ºæˆé•¿æ¡ˆä¾‹</li>
          <li><span class="timestamp">12:15</span> æ‰‹å†™LRUç¼“å­˜ä»£ç ï¼ˆæœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼‰</li>
        </ul>
      </div>
      
      <div class="highlight-section">
        <div class="section-tag warning">
          <SvgIcon name="disadvantages" />
          <span>ä½åˆ†ç‰‡æ®µ</span>
        </div>
        <ul class="timestamp-list">
          <li><span class="timestamp">07:40</span> æ··æ·†TCP/UDPåº”ç”¨åœºæ™¯</li>
          <li><span class="timestamp">09:20</span> å‹åŠ›é¢æ—¶é™ˆè¿°é€Ÿåº¦å‡æ…¢30%</li>
        </ul>
      </div>
    </div>

    <div class="detail-sections">
      <div class="detail-section">
        <div class="section-header">
          <h3>æŠ€æœ¯èƒ½åŠ›</h3>
          <div class="section-score">(88/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>ç®—æ³•å®ç°å®Œæ•´ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼ˆå‡»è´¥95%ç”¨æˆ·ï¼‰</li>
            <li>ç³»ç»Ÿè®¾è®¡è€ƒè™‘é«˜å¯ç”¨æ€§ï¼ˆå¦‚Redisç¼“å­˜+DBä¸€è‡´æ€§æ–¹æ¡ˆï¼‰</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆå¦‚Seataï¼‰è§£é‡Šä¸å¤Ÿæ·±å…¥</li>
            <li>æœªæåŠç›‘æ§ï¼ˆPrometheus/Grafanaï¼‰</li>
          </ul>
        </div>
      </div>
      
      <div class="detail-section">
        <div class="section-header">
          <h3>è¡¨è¾¾é€»è¾‘</h3>
          <div class="section-score">(82/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>STARæ¨¡å‹ä½¿ç”¨ç†Ÿç»ƒï¼ˆæƒ…å¢ƒ-ä»»åŠ¡-è¡ŒåŠ¨-ç»“æœå®Œæ•´90%ï¼‰</li>
            <li>æŠ€æœ¯æœ¯è¯­å‡†ç¡®ï¼ˆå¦‚å‡†ç¡®åŒºåˆ†HTTP/2 vs WebSocketï¼‰</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>å›ç­”å‰5ç§’åœé¡¿"å‘ƒ"ã€"å—¯"æ®‹è¯è¿‡å¤šï¼ˆå…±7æ¬¡ï¼‰</li>
            <li>éƒ¨åˆ†è§£é‡Šè¿‡äºæŠ€æœ¯åŒ–ï¼ˆéæŠ€æœ¯é¢è¯•å®˜å¯èƒ½å›°æƒ‘ï¼‰</li>
          </ul>
        </div>
      </div>
      
      <div class="detail-section">
        <div class="section-header">
          <h3>åº”å˜èƒ½åŠ›</h3>
          <div class="section-score">(76/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>é¢å¯¹çªå‘é—®é¢˜èƒ½å¿«é€Ÿè°ƒæ•´æ€è·¯ï¼ˆååº”æ—¶é—´å¹³å‡3ç§’ï¼‰</li>
            <li>å‹åŠ›ä¸‹ä¿æŒå†·é™ï¼Œé€»è¾‘æ¸…æ™°ï¼ˆå‹åŠ›æµ‹è¯•é€šè¿‡ç‡85%ï¼‰</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>é‡åˆ°å¤æ‚åœºæ™¯æ—¶å®¹æ˜“è¿‡åº¦æ€è€ƒï¼Œå½±å“å†³ç­–é€Ÿåº¦</li>
            <li>å¯¹ä¸ç†Ÿæ‚‰é¢†åŸŸçš„é—®é¢˜ç¼ºä¹çµæ´»çš„è§£å†³æ–¹æ¡ˆ</li>
          </ul>
        </div>
      </div>
      
      <div class="detail-section">
        <div class="section-header">
          <h3>è¡Œä¸ºç¤¼ä»ª</h3>
          <div class="section-score">(91/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>åå§¿ç«¯æ­£ï¼Œçœ¼ç¥äº¤æµè‡ªç„¶ï¼ˆä¸“ä¸šåº¦è¯„åˆ†95%ï¼‰</li>
            <li>è¯­é€Ÿé€‚ä¸­ï¼Œå£°éŸ³æ¸…æ™°ï¼Œè¡¨è¾¾è‡ªä¿¡ï¼ˆæ²Ÿé€šæ•ˆæœä¼˜ç§€ï¼‰</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>å¶å°”å‡ºç°å°å¹…åº¦æ‰‹åŠ¿è¿‡å¤šçš„æƒ…å†µ</li>
            <li>åœ¨ç´§å¼ æ—¶åˆ»ä¼šæœ‰è½»å¾®çš„è¯­è°ƒå˜åŒ–</li>
          </ul>
        </div>
      </div>
      
      <div class="detail-section">
        <div class="section-header">
          <h3>åä½œæ„è¯†</h3>
          <div class="section-score">(68/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>åœ¨å›¢é˜Ÿé¡¹ç›®ä¸­ä¸»åŠ¨æ‰¿æ‹…è´£ä»»ï¼Œä¹äºåˆ†äº«çŸ¥è¯†</li>
            <li>èƒ½å¤Ÿæœ‰æ•ˆåè°ƒä¸åŒè§’è‰²ï¼Œä¿ƒè¿›å›¢é˜Ÿåä½œ</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>åœ¨è·¨éƒ¨é—¨åä½œä¸­å¶å°”ç¼ºä¹ä¸»åŠ¨æ²Ÿé€šæ„è¯†</li>
            <li>å›¢é˜Ÿå†²çªå¤„ç†èƒ½åŠ›æœ‰å¾…æå‡ï¼Œéœ€è¦æ›´å¤šå®è·µ</li>
          </ul>
        </div>
      </div>
      
      <div class="detail-section">
        <div class="section-header">
          <h3>æ–‡åŒ–åŒ¹é…</h3>
          <div class="section-score">(80/100)</div>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag good">
            <SvgIcon name="advantages" />
            <span>ä¼˜åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>ä»·å€¼è§‚ä¸ä¼ä¸šæ–‡åŒ–é«˜åº¦å¥‘åˆï¼ˆåŒ¹é…åº¦90%ï¼‰</li>
            <li>å›¢é˜Ÿåä½œæ„è¯†å¼ºï¼Œå…·å¤‡è‰¯å¥½çš„æ²Ÿé€šåˆä½œèƒ½åŠ›</li>
          </ul>
        </div>
        
        <div class="assessment-group">
          <div class="assessment-tag warning">
            <SvgIcon name="disadvantages" />
            <span>åŠ£åŠ¿</span>
          </div>
          <ul class="assessment-list">
            <li>å¯¹ä¼ä¸šå…·ä½“ä¸šåŠ¡æµç¨‹äº†è§£ä¸å¤Ÿæ·±å…¥</li>
            <li>éœ€è¦æ—¶é—´é€‚åº”ä¼ä¸šçš„å·¥ä½œèŠ‚å¥å’Œç®¡ç†é£æ ¼</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import SvgIcon from '@/components/common/SvgIcon.vue'
import { ref, onMounted } from 'vue'
import { useRouter } from 'vue-router'

const router = useRouter()

// åœ¨çœŸå®åº”ç”¨ä¸­ï¼Œè¿™äº›æ•°æ®å°†é€šè¿‡APIè·å–
const interviewResults = ref(null)

// æ ¹æ®é¢è¯•IDè·å–æµ‹è¯„æ•°æ®
const fetchInterviewResults = async (interviewId) => {
  try {
    // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè°ƒç”¨APIè·å–æ•°æ®
    // const response = await api.getInterviewResults(interviewId)
    // interviewResults.value = response.data
    
    // æ¨¡æ‹Ÿæ•°æ®
    interviewResults.value = {
    score: 85,
      grade: 'A',
      percentile: 89,
      jobMatch: 92,
      abilities: {
    technical: 88,
        expression: 82,
        adaptability: 76,
        behavior: 91,
        english: 68,
        culture: 80
      },
      technicalAssessment: {
        score: 88,
        strengths: [
          'ç®—æ³•å®ç°å®Œæ•´ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼ˆå‡»è´¥95%ç”¨æˆ·ï¼‰',
          'ç³»ç»Ÿè®¾è®¡è€ƒè™‘é«˜å¯ç”¨æ€§ï¼ˆå¦‚Redisç¼“å­˜+DBä¸€è‡´æ€§æ–¹æ¡ˆï¼‰'
        ],
        weaknesses: [
          'åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆå¦‚Seataï¼‰è§£é‡Šä¸å¤Ÿæ·±å…¥',
          'æœªæåŠç›‘æ§ï¼ˆPrometheus/Grafanaï¼‰'
        ]
      },
      expressionAssessment: {
        score: 82,
        strengths: [
          'STARæ¨¡å‹ä½¿ç”¨ç†Ÿç»ƒï¼ˆæƒ…å¢ƒ-ä»»åŠ¡-è¡ŒåŠ¨-ç»“æœå®Œæ•´90%ï¼‰',
          'æŠ€æœ¯æœ¯è¯­å‡†ç¡®ï¼ˆå¦‚å‡†ç¡®åŒºåˆ†HTTP/2 vs WebSocketï¼‰'
        ],
        weaknesses: [
          'å›ç­”å‰5ç§’åœé¡¿"å‘ƒ"ã€"å—¯"æ®‹è¯è¿‡å¤šï¼ˆå…±7æ¬¡ï¼‰',
          'éƒ¨åˆ†è§£é‡Šè¿‡äºæŠ€æœ¯åŒ–ï¼ˆéæŠ€æœ¯é¢è¯•å®˜å¯èƒ½å›°æƒ‘ï¼‰'
        ]
      },
      highlights: [
        { time: '04:32', description: 'å·§å¦™è½¬åŒ–"æœ€å¤§ç¼ºç‚¹"ä¸ºæˆé•¿æ¡ˆä¾‹' },
        { time: '12:15', description: 'æ‰‹å†™LRUç¼“å­˜ä»£ç ï¼ˆæœ€ä¼˜æ—¶é—´å¤æ‚åº¦ï¼‰' }
      ],
      lowlights: [
        { time: '07:40', description: 'æ··æ·†TCP/UDPåº”ç”¨åœºæ™¯' },
        { time: '09:20', description: 'å‹åŠ›é¢æ—¶é™ˆè¿°é€Ÿåº¦å‡æ…¢30%' }
      ]
    }
  } catch (error) {
    console.error('è·å–é¢è¯•ç»“æœå¤±è´¥:', error)
  }
}

onMounted(() => {
  // è·å–URLä¸­çš„é¢è¯•IDå‚æ•°
  // const interviewId = route.params.id || '1'
  // fetchInterviewResults(interviewId)
  
  // æš‚æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
  fetchInterviewResults('1')
})
</script>

<style lang="scss" scoped>
.report-page {
  padding: 24px 32px;
  background-color: #fff;
}

.breadcrumb {
  display: flex;
  align-items: center;
  margin-bottom: 12px;
  font-size: 14px;
  color: #86868b;
}

.breadcrumb-item {
  color: #86868b;
}

.breadcrumb-item.active {
  color: #722ED1;
}

.breadcrumb-divider {
  margin: 0 8px;
  color: #86868b;
}

.score-container {
  margin-bottom: 32px;
}

.score-card {
  background: linear-gradient(90deg, #f6eeff 0%, #ffffff 100%); /* ä»ç´«è‰²æ¸å˜åˆ°ç™½è‰² */
  border-radius: 8px;
  padding: 24px 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.score-main {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.total-score {
  font-size: 42px;
  font-weight: 700;
  margin: 0;
  color: #111827;
  line-height: 1;
}

.trophy-container {
  display: flex;
  align-items: center;
  gap: 8px;
}

.trophy-icon {
  width: 24px;
  height: 24px;
  color: #F59E0B; /* é‡‘è‰² */
}

.grade {
  font-size: 16px;
  font-weight: 500;
  color: #111827;
}

.metrics-container {
  display: flex;
  flex-direction: row; /* æ”¹ä¸ºå¹¶æ’æ˜¾ç¤º */
  gap: 48px; /* è°ƒæ•´é—´è· */
}

.metric-item {
  text-align: left; /* å·¦å¯¹é½ */
}

.metric-label {
  font-size: 14px;
  color: #6b7280;
  margin-bottom: 4px;
}

.metric-value {
  font-size: 24px;
  font-weight: 600;
  color: #111827;
}

.ability-scores {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin-bottom: 24px;
}

.ability-card {
  background-color: white;
  border-radius: 8px;
  padding: 16px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.ability-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 12px;
  color: #111827;
}

.ability-icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  
  .svg-icon {
    width: 20px;
    height: 20px;
    color: #722ED1;
  }
}

/* åä½œæ„è¯†å›¾æ ‡ç‰¹æ®Šé¢œè‰² */
.collaboration-icon .svg-icon {
  color: #722ED1 !important; /* ç´«è‰²ï¼Œä¸å…¶ä»–èƒ½åŠ›å¡ç‰‡ä¿æŒä¸€è‡´ */
}

.ability-score {
  font-size: 24px;
  font-weight: 600;
  margin-bottom: 8px;
  color: #111827;
}

.score-bar {
  height: 8px;
  background-color: #e5e7eb;
  border-radius: 4px;
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #722ED1 0%, #a855f7 100%);
  border-radius: 4px;
  transition: width 0.5s ease;
}

.detail-sections {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.detail-section {
  background-color: white;
  border-radius: 8px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.section-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.section-header h3 {
  font-size: 18px;
  font-weight: 600;
  margin: 0;
  color: #111827;
}

.section-score {
  color: #6b7280;
  font-size: 16px;
}

.assessment-group {
  margin-bottom: 16px;
}

.assessment-tag {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  font-weight: 500;
  
  .svg-icon {
    width: 16px;
    height: 16px;
  }
}

.assessment-tag.good {
  color: #16a34a;
  
  .svg-icon {
    color: #16a34a;
  }
}

.assessment-tag.warning {
  color: #f59e0b;
  
  .svg-icon {
    color: #f59e0b;
  }
}

.assessment-list {
  list-style-type: none;
  padding-left: 28px;
  margin: 0;
}

.assessment-list li {
  position: relative;
  margin-bottom: 8px;
  font-size: 14px;
  line-height: 1.5;
}

.assessment-list li::before {
  content: "â€¢";
  position: absolute;
  left: -16px;
}

.highlight-lowlight {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;
  margin-bottom: 32px;
}

.highlight-section {
  background-color: white;
  border-radius: 8px;
  padding: 24px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.section-tag {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 16px;
  font-weight: 600;
  font-size: 16px;

  .svg-icon {
    width: 20px;
    height: 20px;
  }
}

.section-tag.good {
  color: #16a34a;
  
  .svg-icon {
    color: #16a34a;
  }
}

.section-tag.warning {
  color: #f59e0b;
  
  .svg-icon {
    color: #f59e0b;
  }
}

.timestamp-list {
  list-style-type: none;
  padding: 0;
  margin: 0;
}

.timestamp-list li {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
}

.timestamp {
  font-weight: 500;
  color: #6b7280;
}

// å›¾æ ‡æ ·å¼
.icon-code::before {
  content: "</>";
  color: #722ED1;
}

.icon-chat::before {
  content: "ğŸ’¬";
}

.icon-solution::before {
  content: "ğŸ§©";
}

.icon-behavior::before {
  content: "ğŸ‘¤";
}

.icon-language::before {
  content: "ğŸŒ";
}

.icon-culture::before {
  content: "ğŸ¢";
}

.icon-check::before {
  content: "âœ“";
}

.icon-warning::before {
  content: "âš ";
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .report-page {
    padding: 16px;
  }
  
  .score-card {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }
  
  .metrics-container {
    flex-direction: row;
    width: 100%;
    justify-content: space-between;
  }
  
  .metric-item {
    text-align: left;
  }
  
  .ability-scores {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .highlight-lowlight {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 480px) {
  .ability-scores {
    grid-template-columns: 1fr;
  }

  .metrics-container {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>